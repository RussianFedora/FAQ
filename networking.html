
<!DOCTYPE html>

<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Сетевое администрирование &#8212; Неофициальный FAQ по Fedora (версия 2022.01.04)</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/translations.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script defer="defer" src="_static/search.js"></script>
    <link rel="shortcut icon" href="_static/faq-icon.ico"/>
    <link rel="index" title="Алфавитный указатель" href="genindex.html" />
    <link rel="search" title="Поиск" href="search.html" />
    <link rel="next" title="Виртуализация" href="virtualization.html" />
    <link rel="prev" title="Системное администрирование" href="administration.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
    <link rel="apple-touch-icon" href="_static/faq-icon.png" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="networking">
<span id="id1"></span><h1>Сетевое администрирование<a class="headerlink" href="#networking" title="Ссылка на этот заголовок">¶</a></h1>
<section id="vpn">
<span id="vpn-selection"></span><span id="index-0"></span><h2>Хочу обезопасить свой Интернет-трафик. Какую реализацию VPN выбрать?<a class="headerlink" href="#vpn" title="Ссылка на этот заголовок">¶</a></h2>
<section id="wireguard">
<h3>WireGuard<a class="headerlink" href="#wireguard" title="Ссылка на этот заголовок">¶</a></h3>
<p><a class="reference internal" href="#using-wireguard"><span class="std std-ref">WireGuard</span></a> – самый современный и актуальный протокол для VPN. Обеспечивает максимальную скорость работы за счёт реализации в виде модуля ядра Linux и надёжную криптографическую защиту от прослушивания.</p>
</section>
<section id="openvpn">
<h3>OpenVPN<a class="headerlink" href="#openvpn" title="Ссылка на этот заголовок">¶</a></h3>
<p><a class="reference internal" href="#using-openvpn"><span class="std std-ref">OpenVPN</span></a> – cамая популярная и стабильная в настоящее время реализация VPN. Способен работать как через UDP, так и TCP, имеет плагины маскировки под TLS, обеспечивает высокую защищённость, но имеет низкую производительность из-за постоянных переключений между режимами пользователя и ядра.</p>
</section>
<section id="l2tp-ipsec">
<h3>L2TP/IPSec<a class="headerlink" href="#l2tp-ipsec" title="Ссылка на этот заголовок">¶</a></h3>
<p>Поддерживается большинством роутеров «из коробки», но является устаревшим. Изначально создавался для Windows, поэтому многие серверы заточены под соответствующие реализации клиентов.</p>
</section>
<section id="pptp">
<h3>PPTP<a class="headerlink" href="#pptp" title="Ссылка на этот заголовок">¶</a></h3>
<p>Устаревший, <a class="reference external" href="https://xakep.ru/2012/07/30/59067/">уязвимый by design</a> протокол. Трафик, проходящий через сеть, использующую данный протокол, может быть легко расшифрован за несколько часов. Категорически не рекомендуется к применению даже на устаревшем оборудовании.</p>
</section>
</section>
<section id="ssh">
<span id="ssh-keys-error"></span><span id="index-1"></span><h2>При использовании SSH появляется ошибка доступа к ключам. Как исправить?<a class="headerlink" href="#ssh" title="Ссылка на этот заголовок">¶</a></h2>
<p>См. <a class="reference external" href="https://www.easycoding.org/2016/07/31/reshaem-problemu-s-ssh-klyuchami-v-fedora-24.html">здесь</a>.</p>
</section>
<section id="vpn-pptp">
<span id="pptp-connection-error"></span><span id="index-2"></span><h2>При установке VPN-соединения по протоколу PPTP появляется ошибка. Как исправить?<a class="headerlink" href="#vpn-pptp" title="Ссылка на этот заголовок">¶</a></h2>
<p>Если продключение к VPN по протоколу <a class="reference internal" href="#vpn-selection"><span class="std std-ref">PPTP</span></a> не проходит из-за ошибки, включим поддержку <a class="reference external" href="https://ru.wikipedia.org/wiki/GRE_(%D0%BF%D1%80%D0%BE%D1%82%D0%BE%D0%BA%D0%BE%D0%BB)">GRE</a> в настройках <a class="reference internal" href="security.html#firewalld-about"><span class="std std-ref">межсетевого экрана</span></a>.</p>
<p>Для этого выполним следующее:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo firewall-cmd --permanent --add-protocol=gre
sudo firewall-cmd --reload
</pre></div>
</div>
<p>Изменения вступят в силу немедленно.</p>
<p><strong>Важно:</strong> Некоторые интернет-провайдеры и большая часть операторов сотовой связи ограничивают передачу данных по протоколу GRE. В случае, если вы уверены, что поставщик услуг связи здесь не при чем, обратите внимание на маршрутизатор: некоторые модели бюджетных устройств также могут ограничивать трафик.</p>
</section>
<section id="firewalld-port-forwarding">
<span id="index-3"></span><span id="id2"></span><h2>Как пробросить локальный порт на удалённый хост?<a class="headerlink" href="#firewalld-port-forwarding" title="Ссылка на этот заголовок">¶</a></h2>
<p>См. <a class="reference external" href="https://www.easycoding.org/2017/05/23/probrasyvaem-lokalnyj-port-na-udalyonnyj-xost.html">здесь</a>.</p>
</section>
<section id="openvpn-fedora">
<span id="using-openvpn"></span><span id="index-4"></span><h2>Как поднять OpenVPN сервер в Fedora?<a class="headerlink" href="#openvpn-fedora" title="Ссылка на этот заголовок">¶</a></h2>
<p>См. <a class="reference external" href="https://www.easycoding.org/2017/07/24/podnimaem-ovn-server-na-fedora.html">здесь</a>. В данной статье вместо <strong>ovn</strong> следует использовать <strong>openvpn</strong> во всех путях и именах юнитов.</p>
</section>
<section id="wireguard-fedora">
<span id="using-wireguard"></span><span id="index-5"></span><h2>Как поднять WireGuard сервер в Fedora?<a class="headerlink" href="#wireguard-fedora" title="Ссылка на этот заголовок">¶</a></h2>
<p>См. <a class="reference external" href="https://www.easycoding.org/2019/02/28/podnimaem-wireguard-server-na-fedora.html">здесь</a>.</p>
</section>
<section id="matrix-fedora">
<span id="matrix-server"></span><span id="index-6"></span><h2>Как поднять свой сервер Matrix в Fedora?<a class="headerlink" href="#matrix-fedora" title="Ссылка на этот заголовок">¶</a></h2>
<p>См. <a class="reference external" href="https://www.easycoding.org/2018/04/15/podnimaem-sobstvennyj-matrix-server-v-fedora.html">здесь</a>.</p>
</section>
<section id="fedora">
<span id="simple-web-server"></span><span id="index-7"></span><h2>Как запустить простейший веб-сервер в Fedora?<a class="headerlink" href="#fedora" title="Ссылка на этот заголовок">¶</a></h2>
<p>Для запуска простейшего веб-сервера можно использовать Python и модуль, входящий в состав базового пакета:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>python3 -m http.server 8080
</pre></div>
</div>
<p>Веб-сервер будет запущен на порту <strong>8080</strong>. В качестве webroot будет использоваться текущий рабочий каталог.</p>
</section>
<section id="network-configuration">
<span id="index-8"></span><span id="id3"></span><h2>Как лучше настраивать сетевые подключения?<a class="headerlink" href="#network-configuration" title="Ссылка на этот заголовок">¶</a></h2>
<p>В Fedora для настройки сети используется Network Manager. Для работы с ним доступны как графические менеджеры (встроены в каждую DE), так и консольный <strong>nm-cli</strong>.</p>
</section>
<section id="dlna">
<span id="dlna-server"></span><span id="index-9"></span><h2>Как поднять DLNA сервер в локальной сети?<a class="headerlink" href="#dlna" title="Ссылка на этот заголовок">¶</a></h2>
<p>См. <a class="reference external" href="https://www.easycoding.org/2018/09/08/podnimaem-dlna-server-v-fedora.html">здесь</a>.</p>
</section>
<section id="fedora-iperf">
<span id="index-10"></span><span id="id4"></span><h2>Как сделать замеры скорости локальной или беспроводной сети?<a class="headerlink" href="#fedora-iperf" title="Ссылка на этот заголовок">¶</a></h2>
<p>Для точных замеров производительности сети нам потребуется как минимум два компьютера (либо компьютер и мобильное устройство), а также утилита <strong>iperf3</strong>, присутствующая в репозиториях Fedora. Установим её:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo dnf install iperf3
</pre></div>
</div>
<p>На первом устройстве запустим сервер:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>iperf3 -s
</pre></div>
</div>
<p>По умолчанию iperf прослушивает порт <strong>5001/tcp</strong> на всех доступных сетевых соединениях.</p>
<p>Теперь временно разрешим входящие соединения на данный порт посредством <a class="reference internal" href="security.html#firewalld-about"><span class="std std-ref">Firewalld</span></a> (правило будет действовать до перезагрузки):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo firewall-cmd --add-port=5001/tcp
</pre></div>
</div>
<p>На втором устройстве запустим клиент и подключимся к серверу:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>iperf3 -c 192.168.1.2
</pre></div>
</div>
<p>В качестве клиента может выступать и мобильное устройство на базе ОС Android с установленным <a class="reference external" href="https://play.google.com/store/apps/details?id=net.he.networktools">Network Tools</a>. В этом случае в главном меню программы следует выбрать пункт <strong>Iperf3</strong>, а в окне подключения ввести:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-c 192.168.1.2
</pre></div>
</div>
<p>Параметр <strong>-c</strong> обязателен. Если он не указан, программа выдаст ошибку.</p>
<p><strong>192.168.1.2</strong> – это внутренний IP-адрес устройства в ЛВС, на котором запущен сервер. Номер порта указывать не требуется.</p>
</section>
<section id="rsync-remote">
<span id="index-11"></span><span id="id5"></span><h2>Как передать содержимое каталога на удалённый сервер?<a class="headerlink" href="#rsync-remote" title="Ссылка на этот заголовок">¶</a></h2>
<p>Передача содержимого локального каталога на удалённый сервер посредством rsync:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>rsync -chavzP --delete --stats /path/to/local user@example.org:/path/to/remote
</pre></div>
</div>
<p>Здесь <strong>user&#64;example.org</strong> – данные для подключения к серверу, т.е. имя пользователя на удалённом сервере и хост.</p>
</section>
<section id="rsync-local">
<span id="index-12"></span><span id="id6"></span><h2>Как получить содержимое каталога с удалённого сервера?<a class="headerlink" href="#rsync-local" title="Ссылка на этот заголовок">¶</a></h2>
<p>Получение содержимого каталога с удалённого сервера посредством rsync:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>rsync -chavzP --delete --stats user@example.org:/path/to/remote /path/to/local
</pre></div>
</div>
<p>Здесь <strong>user&#64;example.org</strong> – данные для подключения к серверу, т.е. имя пользователя на удалённом сервере и хост.</p>
</section>
<section id="dns-fedora">
<span id="change-dns"></span><span id="index-13"></span><h2>Как правильно указать DNS серверы в Fedora?<a class="headerlink" href="#dns-fedora" title="Ссылка на этот заголовок">¶</a></h2>
<p>Для того, чтобы указать другие DNS серверы, необходимо использовать Network Manager (графический или консольный): <strong>свойства соединения</strong> -&gt; страница <strong>IPv4</strong> -&gt; <strong>другие DNS серверы</strong>.</p>
</section>
<section id="etc-resolv-conf-fedora">
<span id="dns-resolv"></span><span id="index-14"></span><h2>Можно ли править файл /etc/resolv.conf в Fedora?<a class="headerlink" href="#etc-resolv-conf-fedora" title="Ссылка на этот заголовок">¶</a></h2>
<p>Нет, т.к. этот файл целиком управляется Network Manager и перезаписывается при каждом изменении статуса подключения (активация-деактивация соединений, перезапуск сервиса и т.д.).</p>
<p>Если необходимо указать другие DNS серверы, это следует производить через <a class="reference internal" href="#change-dns"><span class="std std-ref">свойства</span></a> соответствующего соединения.</p>
</section>
<section id="firewalld-icmp">
<span id="disable-icmp"></span><span id="index-15"></span><h2>Как можно средствами Firewalld запретить ICMP?<a class="headerlink" href="#firewalld-icmp" title="Ссылка на этот заголовок">¶</a></h2>
<p>По умолчанию ICMP трафик разрешён для большей части зон, поэтому запретить его можно вручную:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo firewall-cmd --zone=public --remove-icmp-block={echo-request,echo-reply,timestamp-reply,timestamp-request} --permanent
</pre></div>
</div>
<p>Применим новые правила:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo firewall-cmd --reload
</pre></div>
</div>
<p>В данном примере для зоны <strong>public</strong> блокируются как входящие, так и исходящие ICMP ECHO и ICMP TIMESTAMP.</p>
</section>
<section id="firewalld-openvpn-ip">
<span id="openvpn-allowed-ips"></span><span id="index-16"></span><h2>Как средствами Firewalld разрешить подключение к OpenVPN серверу только с разрешённых IP адресов?<a class="headerlink" href="#firewalld-openvpn-ip" title="Ссылка на этот заголовок">¶</a></h2>
<p>Сначала отключим правило по умолчанию для <a class="reference internal" href="#using-openvpn"><span class="std std-ref">OpenVPN</span></a>, разрешающее доступ к серверу с любых IP адресов:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo firewall-cmd --zone=public --remove-service openvpn --permanent
</pre></div>
</div>
<p>Теперь создадим rich rule, разрешающее доступ с указанных IP-адресов (или подсетей):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo firewall-cmd --zone=public --add-rich-rule=&#39;rule family=ipv4 source address=&quot;1.2.3.4&quot; service name=&quot;openvpn&quot; accept&#39; --permanent
sudo firewall-cmd --zone=public --add-rich-rule=&#39;rule family=ipv4 source address=&quot;5.6.7.0/24&quot; service name=&quot;openvpn&quot; accept&#39; --permanent
</pre></div>
</div>
<p>Применим новые правила:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo firewall-cmd --reload
</pre></div>
</div>
<p>Здесь <strong>public</strong> – имя зоны для публичного интерфейса, <strong>1.2.3.4</strong> – IP-адрес, а <strong>5.6.7.0/24</strong> – подсеть, доступ для адресов из которой следует разрешить.</p>
</section>
<section id="firewalld-wireguard-ip">
<span id="wireguard-allowed-ips"></span><span id="index-17"></span><h2>Как средствами Firewalld разрешить подключение к WireGuard серверу только с разрешённых IP адресов?<a class="headerlink" href="#firewalld-wireguard-ip" title="Ссылка на этот заголовок">¶</a></h2>
<p>Сначала отключим правило по умолчанию для <a class="reference internal" href="#using-wireguard"><span class="std std-ref">WireGuard</span></a>, разрешающее доступ к серверу с любых IP адресов:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo firewall-cmd --zone=public --remove-port=27015/udp --permanent
</pre></div>
</div>
<p>Теперь создадим rich rule, разрешающее доступ с указанных IP-адресов (или подсетей):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo firewall-cmd --zone=public --add-rich-rule=&#39;rule family=ipv4 source address=&quot;1.2.3.4&quot; port port=27015 protocol=udp accept&#39; --permanent
sudo firewall-cmd --zone=public --add-rich-rule=&#39;rule family=ipv4 source address=&quot;5.6.7.0/24&quot; port port=27015 protocol=udp accept&#39; --permanent
</pre></div>
</div>
<p>Применим новые правила:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo firewall-cmd --reload
</pre></div>
</div>
<p>Здесь <strong>27015</strong> – порт сервера WireGuard, <strong>public</strong> – имя зоны для публичного интерфейса, <strong>1.2.3.4</strong> – IP-адрес, а <strong>5.6.7.0/24</strong> – подсеть, доступ для адресов из которой следует разрешить.</p>
</section>
<section id="ip-nat">
<span id="get-external-ip"></span><span id="index-18"></span><h2>Как узнать внешний IP адрес за NAT провайдера?<a class="headerlink" href="#ip-nat" title="Ссылка на этот заголовок">¶</a></h2>
<p>Для этой цели можно использовать внешний сервис, возвращающий только внешний IP и утилиту <strong>curl</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>curl https://ifconfig.me
</pre></div>
</div>
</section>
<section id="firewalld-ip-cloudflare">
<span id="firewalld-cloudflare"></span><span id="index-19"></span><h2>Как средствами Firewalld разрешить подключение к веб-серверу только с IP адресов CloudFlare?<a class="headerlink" href="#firewalld-ip-cloudflare" title="Ссылка на этот заголовок">¶</a></h2>
<p>При использовании CloudFlare в качестве системы защиты от DDoS атак, а также WAF, возникает необходимость разрешать входящие подключения исключительно с IP адресов данного сервиса.</p>
<p>Сначала отключим правило по умолчанию для веб-сервера, разрешающее доступ с любых IP адресов:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo firewall-cmd --zone=public --remove-service http --permanent
sudo firewall-cmd --zone=public --remove-service https --permanent
</pre></div>
</div>
<p>Напишем небольшой скрипт <code class="docutils literal notranslate"><span class="pre">foo-bar.sh</span></code>, который получит актуальные пулы IP-адресов и создаст rich rule, разрешающие доступ лишь с подсетей CloudFlare (<a class="reference external" href="https://www.cloudflare.com/ips-v4">IPv4</a>, <a class="reference external" href="https://www.cloudflare.com/ips-v6">IPv6</a>):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="nb">set</span> -ef

<span class="nv">API</span><span class="o">=</span>https://www.cloudflare.com/ips-v
<span class="nv">ZONE</span><span class="o">=</span>public

<span class="k">function</span> fw_add <span class="o">{</span>
    <span class="nb">local</span> <span class="nv">IFS</span><span class="o">=</span><span class="s1">$&#39;\n&#39;</span>
    <span class="nb">local</span> <span class="nv">lines</span><span class="o">=(</span><span class="k">$(</span>curl -sS <span class="nv">$API$1</span><span class="k">)</span><span class="o">)</span>
    <span class="k">for</span> i <span class="k">in</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">lines</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">do</span>
        firewall-cmd --zone<span class="o">=</span><span class="nv">$ZONE</span> --add-rich-rule<span class="o">=</span><span class="s2">&quot;rule family=ipv</span><span class="nv">$1</span><span class="s2"> source address=\&quot;</span><span class="nv">$i</span><span class="s2">\&quot; service name=\&quot;http\&quot; accept&quot;</span> --permanent
        firewall-cmd --zone<span class="o">=</span><span class="nv">$ZONE</span> --add-rich-rule<span class="o">=</span><span class="s2">&quot;rule family=ipv</span><span class="nv">$1</span><span class="s2"> source address=\&quot;</span><span class="nv">$i</span><span class="s2">\&quot; service name=\&quot;https\&quot; accept&quot;</span> --permanent
    <span class="k">done</span>
<span class="o">}</span>

fw_add <span class="m">4</span>
fw_add <span class="m">6</span>
</pre></div>
</div>
<p>Запустим наш скрипт:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo ./foo-bar.sh
</pre></div>
</div>
<p>Применим новые правила файрвола:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo firewall-cmd --reload
</pre></div>
</div>
<p>Здесь <strong>public</strong> – имя зоны для публичного сетевого интерфейса.</p>
</section>
<section id="ip-cloudflare">
<span id="cloudflare-forwarding"></span><span id="index-20"></span><h2>Как пробросить IP адреса клиентов за CloudFlare?<a class="headerlink" href="#ip-cloudflare" title="Ссылка на этот заголовок">¶</a></h2>
<p>См. <a class="reference external" href="https://www.easycoding.org/2013/08/12/nastraivaem-probros-ip-klientov-za-cloudflare.html">здесь</a>.</p>
</section>
<section id="using-mtr">
<span id="index-21"></span><span id="id7"></span><h2>Как проверить наличие или отсутствие потерь пакетов до узла?<a class="headerlink" href="#using-mtr" title="Ссылка на этот заголовок">¶</a></h2>
<p>Для проверки работоспособности сети и наличия, либо отсутствия потерь пакетов между узлами маршрута, широко используется утилита <strong>mtr</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo dnf install mtr
</pre></div>
</div>
<p>Запустим проверку маршрута до узла <strong>example.org</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>mtr example.org
</pre></div>
</div>
<p>Приостановить работу можно нажатием клавиши <strong>P</strong>, для возобновить – <strong>пробел</strong>, а для выхода – <strong>Q</strong>.</p>
</section>
<section id="ss-established">
<span id="index-22"></span><span id="id8"></span><h2>Как получить список установленных сетевых соединений?<a class="headerlink" href="#ss-established" title="Ссылка на этот заголовок">¶</a></h2>
<p>Воспользуемся утилитой <strong>ss</strong> для вывода списка установленных сетевых соединений:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ss -tupn
</pre></div>
</div>
</section>
<section id="ss-listening">
<span id="index-23"></span><span id="id9"></span><h2>Как получить список открытых портов?<a class="headerlink" href="#ss-listening" title="Ссылка на этот заголовок">¶</a></h2>
<p>Воспользуемся утилитой <strong>ss</strong> для вывода открытых портов, ожидающих входящих соединений:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ss -tulpn
</pre></div>
</div>
<p>Статус <strong>LISTEN</strong> означает, что TCP-порт открыт и ожидает входящих соединений. В то же время для UDP-портов будет отображаться статус <strong>UNCONN</strong>, т.к. этот протокол не подразумевает предварительное открытие подключений.</p>
</section>
<section id="transient-hostname">
<span id="index-24"></span><span id="id10"></span><h2>Почему при подключении к сети имя хоста машины изменяется?<a class="headerlink" href="#transient-hostname" title="Ссылка на этот заголовок">¶</a></h2>
<p>DHCP сервер провайдера способен выдавать помимо IP-адресов и DNS-серверов ещё и нестандартное имя хоста. Полученное таким способом значение называется <em>transient hostname</em>. Оно будет применимо с компьютеру с момента установки соединения и до отключения от соответствующей сети.</p>
<p>Если на компьютере имеется несколько сетевых подключений, каждое из которых предоставляет свой hostname, основным будет считаться то, чьё соединение было установлено последним.</p>
</section>
<section id="transient-disable">
<span id="index-25"></span><span id="id11"></span><h2>Как запретить использование полученного от провайдера имени хоста?<a class="headerlink" href="#transient-disable" title="Ссылка на этот заголовок">¶</a></h2>
<p>Для того, чтобы запретить использование полученного от DHCP сервера <a class="reference internal" href="#transient-hostname"><span class="std std-ref">transient hostname</span></a>, установим <a class="reference internal" href="administration.html#change-hostname"><span class="std std-ref">статическое имя хоста</span></a>.</p>
</section>
<section id="network-manager-systemd-resolved">
<span id="resolved-nm"></span><span id="index-26"></span><h2>Как переключить Network Manager на использование systemd-resolved?<a class="headerlink" href="#network-manager-systemd-resolved" title="Ссылка на этот заголовок">¶</a></h2>
<p>Начиная с Fedora 30, в комплект базовой системы входит systemd-resolved, который занимается преобразованием имён DNS в IP-адреса, имеет встроенный DNS-кэш и активирован по умолчанию.</p>
<p>В то же время, Network Manager с настройками по умолчанию использует собственный виртуальный файл конфигурации <a class="reference internal" href="#dns-resolv"><span class="std std-ref">resolv.conf</span></a>, игнорирующий присутствие systemd-resolved.</p>
<p>Для исправления этой ситуации, убедимся, что systemd-neworkd запущен и функционирует:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo systemctl enable --now systemd-resolved.service
</pre></div>
</div>
<p>Создадим в каталоге <code class="docutils literal notranslate"><span class="pre">/etc/NetworkManager/conf.d</span></code> файл <code class="docutils literal notranslate"><span class="pre">99-resolved.conf</span></code> следующего содержания:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[main]</span><span class="w"></span>
<span class="na">dns</span><span class="o">=</span><span class="s">systemd-resolved</span><span class="w"></span>
</pre></div>
</div>
<p>Убедимся, что файл <code class="docutils literal notranslate"><span class="pre">/etc/resolv.conf</span></code> является символической ссылкой на <code class="docutils literal notranslate"><span class="pre">/run/NetworkManager/resolv.conf</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>file /etc/resolv.conf
</pre></div>
</div>
<p>Если по какой-то причине это не так, то внесём соответствующие правки:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo rm -f /etc/resolv.conf
sudo ln -sf /run/NetworkManager/resolv.conf /etc/resolv.conf
</pre></div>
</div>
<p>Перезапустим затронутые сервисы:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo systemctl restart NetworkManager.service
sudo systemctl restart systemd-resolved.service
</pre></div>
</div>
<p>Проверим, что в качестве основного сервера DNS применяется виртуальная заглушка:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cat /etc/resolv.conf
</pre></div>
</div>
<p>Если в выводе присутствует строка <code class="docutils literal notranslate"><span class="pre">nameserver</span> <span class="pre">127.0.0.53</span></code>, значит всё настроено верно.</p>
</section>
<section id="systemd-resolved">
<span id="resolved-status"></span><span id="index-27"></span><h2>Как проверить статус работы systemd-resolved?<a class="headerlink" href="#systemd-resolved" title="Ссылка на этот заголовок">¶</a></h2>
<p>Выведем статус systemd-resolved, включающий список используемых DNS серверов и общие параметры конфигурации:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>resolvectl status
</pre></div>
</div>
<p>Выведем статистические данные об использовании systemd-resolved (состояние кэша, количество запросов и т.д.):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>resolvectl statistics
</pre></div>
</div>
</section>
<section id="resolved-default">
<span id="index-28"></span><span id="id12"></span><h2>Как сделать systemd-resolved основным резолвером?<a class="headerlink" href="#resolved-default" title="Ссылка на этот заголовок">¶</a></h2>
<p><strong>Важно:</strong> Начиная с Fedora 33, systemd-resolved уже используется в качестве основного системного DNS-резолвера.</p>
<p>Удалим существующую символическую ссылку, указывающую на Network Manager:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo rm -f /etc/resolv.conf
</pre></div>
</div>
<p>Установим systemd-resolved основным резолвером:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo ln -sf /run/systemd/resolve/stub-resolv.conf /etc/resolv.conf
</pre></div>
</div>
<p>Изменения вступят в силу немедленно.</p>
</section>
<section id="resolved-disable">
<span id="index-29"></span><span id="id13"></span><h2>Как отключить systemd-resolved и вернуться к прежней реализации?<a class="headerlink" href="#resolved-disable" title="Ссылка на этот заголовок">¶</a></h2>
<p>Удалим существующую символическую ссылку, указывающую на <a class="reference internal" href="#resolved-default"><span class="std std-ref">systemd-resolved</span></a>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo rm -f /etc/resolv.conf
</pre></div>
</div>
<p>Установим Network Manager основным <a class="reference internal" href="#dns-resolv"><span class="std std-ref">генератором</span></a> файла <code class="docutils literal notranslate"><span class="pre">/etc/resolv.conf</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo ln -sf /run/NetworkManager/resolv.conf /etc/resolv.conf
</pre></div>
</div>
<p>Остановим и заблокируем сервис:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo systemctl disable --now systemd-resolved.service
sudo systemctl mask systemd-resolved.service
</pre></div>
</div>
<p>Изменения вступят в силу немедленно.</p>
</section>
<section id="dns-tls">
<span id="dns-crypt"></span><span id="index-30"></span><h2>Можно ли зашифровать DNS при помощи TLS?<a class="headerlink" href="#dns-tls" title="Ссылка на этот заголовок">¶</a></h2>
<p>Да, systemd-resolved, входящий в поставку системы начиная с Fedora 30, полностью поддерживает технологию <a class="reference external" href="https://ru.wikipedia.org/wiki/DNS_%D0%BF%D0%BE%D0%B2%D0%B5%D1%80%D1%85_TLS">DNS-over-TLS</a>, позволяющую зашифровать весь DNS трафик устройства.</p>
<p>Настроим систему на использование systemd-resolved либо <a class="reference internal" href="#resolved-nm"><span class="std std-ref">совместно с Network Manager</span></a>, либо в <a class="reference internal" href="#resolved-default"><span class="std std-ref">монопольном режиме</span></a>, затем откроем файл конфигурации <code class="docutils literal notranslate"><span class="pre">/etc/systemd/resolved.conf</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudoedit /etc/systemd/resolved.conf
</pre></div>
</div>
<p>Внесём следующие правки:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Resolve]</span><span class="w"></span>
<span class="na">DNS</span><span class="o">=</span><span class="s">1.1.1.1 1.0.0.1 2606:4700:4700::1111 2606:4700:4700::1001</span><span class="w"></span>
<span class="na">FallbackDNS</span><span class="o">=</span><span class="s">8.8.8.8 8.8.4.4 2001:4860:4860::8888 2001:4860:4860::8844</span><span class="w"></span>
<span class="c1">#Domains=</span><span class="w"></span>
<span class="c1">#LLMNR=yes</span><span class="w"></span>
<span class="na">MulticastDNS</span><span class="o">=</span><span class="s">yes</span><span class="w"></span>
<span class="na">DNSSEC</span><span class="o">=</span><span class="s">allow-downgrade</span><span class="w"></span>
<span class="na">DNSOverTLS</span><span class="o">=</span><span class="s">opportunistic</span><span class="w"></span>
<span class="na">Cache</span><span class="o">=</span><span class="s">yes</span><span class="w"></span>
<span class="na">DNSStubListener</span><span class="o">=</span><span class="s">yes</span><span class="w"></span>
<span class="na">ReadEtcHosts</span><span class="o">=</span><span class="s">yes</span><span class="w"></span>
</pre></div>
</div>
<p>Здесь используются серверы <a class="reference external" href="https://cloudflare-dns.com/dns/">CloudFlare</a> с поддержкой DNS-over-TLS.</p>
<p>Сохраним изменения в файле и перезапустим systemd-resolved:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo systemctl restart systemd-resolved.service
</pre></div>
</div>
<p>Теперь в <a class="reference internal" href="#resolved-status"><span class="std std-ref">информации об используемых DNS</span></a> должна отображаться информация об использовании этой технологии.</p>
</section>
<section id="resolved-flush">
<span id="index-31"></span><span id="id14"></span><h2>Как очистить кэши systemd-resolved?<a class="headerlink" href="#resolved-flush" title="Ссылка на этот заголовок">¶</a></h2>
<p>Очистим кэш systemd-resolved:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>resolvectl flush-caches
</pre></div>
</div>
</section>
<section id="firewalld">
<span id="firewalld-services"></span><span id="index-32"></span><h2>Где расположены файлы конфигурации доступных сервисов Firewalld?<a class="headerlink" href="#firewalld" title="Ссылка на этот заголовок">¶</a></h2>
<p>Предустановленные файлы конфигурации служб Firewalld находятся в каталоге <code class="docutils literal notranslate"><span class="pre">/usr/lib/firewalld/services</span></code>.</p>
<p>Настоятельно не рекомендуется что-либо изменять в нём ибо при следующем обновлении пакета все изменения будут потеряны. Вместо этого следует создать <a class="reference internal" href="#firewalld-override"><span class="std std-ref">пользовательское переопределение</span></a>.</p>
</section>
<section id="firewalld-override">
<span id="index-33"></span><span id="id15"></span><h2>Как переопределить предустановленный сервис в Firewalld?<a class="headerlink" href="#firewalld-override" title="Ссылка на этот заголовок">¶</a></h2>
<p>Пользовательские переопределения должны храниться в каталоге <code class="docutils literal notranslate"><span class="pre">/etc/firewalld/services</span></code>.</p>
<p>В качестве примера создадим оверрайд для сервиса SSH на базе настроек по умолчанию:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo cp /usr/lib/firewalld/services/ssh.xml /etc/firewalld/services/ssh.xml
</pre></div>
</div>
<p>Откроем скопированный файл в текстовом редакторе:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudoedit /etc/firewalld/services/ssh.xml
</pre></div>
</div>
<p>Внесём правки, добавив возможность использования порта <strong>2222/tcp</strong>:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;service&gt;</span>
    <span class="nt">&lt;short&gt;</span>SSH<span class="nt">&lt;/short&gt;</span>
    <span class="nt">&lt;description&gt;</span>Secure Shell (SSH) is a protocol.<span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;port</span> <span class="na">protocol=</span><span class="s">&quot;tcp&quot;</span> <span class="na">port=</span><span class="s">&quot;22&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;port</span> <span class="na">protocol=</span><span class="s">&quot;tcp&quot;</span> <span class="na">port=</span><span class="s">&quot;2222&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/service&gt;</span>
</pre></div>
</div>
<p>Перезагрузим настройки Firewalld для вступления изменений в силу:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo firewall-cmd --reload
</pre></div>
</div>
</section>
<section id="ovpn">
<span id="ovpn-import"></span><span id="index-34"></span><h2>Как правильно импортировать подключение из OVPN файла?<a class="headerlink" href="#ovpn" title="Ссылка на этот заголовок">¶</a></h2>
<p>Воспользуемся консольной утилитой <strong>nmcli</strong> для быстрого импортирования подключения из OVPN файла:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>nmcli connection import file /path/to/foo-bar.ovpn type openvpn
</pre></div>
</div>
<p>Здесь <strong>/path/to/foo-bar.ovpn</strong> – путь к OVPN файлу на диске.</p>
<p>Встроенные сертификаты и ключи будут автоматически импортированы и сохранены в каталоге <code class="docutils literal notranslate"><span class="pre">~/.cert/nm-openvpn</span></code>, что не вызовет <a class="reference internal" href="security.html#openvpn-selinux"><span class="std std-ref">проблем с SELinux</span></a>.</p>
</section>
<section id="check-port">
<span id="index-35"></span><span id="id16"></span><h2>Как проверить открыт ли порт на удалённом сервере?<a class="headerlink" href="#check-port" title="Ссылка на этот заголовок">¶</a></h2>
<p>Воспользуемся утилитой <strong>nc</strong> для непосредственного осуществления проверки без полного сканирования портов.</p>
<p>Проверим доступность сервиса на IP <strong>1.2.3.4</strong> с номером порта <strong>443/tcp</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>nc -z -v 1.2.3.4 443
</pre></div>
</div>
<p>Проверим доступность сервиса на IP <strong>1.2.3.4</strong> с номером порта <strong>27015/udp</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>nc -z -v -u 1.2.3.4 27015
</pre></div>
</div>
</section>
<section id="wireguard-lan">
<span id="index-36"></span><span id="id17"></span><h2>Как открыть доступ к локальной сети через WireGuard?<a class="headerlink" href="#wireguard-lan" title="Ссылка на этот заголовок">¶</a></h2>
<p>Для того, чтобы через VPN была также доступна локальная сеть, внесём ряд изменений в файлы конфигурации сервера и клиента <a class="reference internal" href="#using-wireguard"><span class="std std-ref">WireGuard</span></a>.</p>
<p>Отредактируем файл <code class="docutils literal notranslate"><span class="pre">/etc/wireguard/wg0.conf</span></code> сервера:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudoedit /etc/wireguard/wg0.conf
</pre></div>
</div>
<p>В директиве <code class="docutils literal notranslate"><span class="pre">AllowedIPs</span></code> через запятую добавим адрес локальной подсети клиента, например <strong>192.168.1.0/24</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[Peer]
PublicKey = CLIENT_PUBLIC_KEY
AllowedIPs = 10.9.0.2/32, 192.168.1.0/24
</pre></div>
</div>
<p>Перезапустим сервис WireGuard на сервере:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo systemctl restart wg-quick@wg0.service
</pre></div>
</div>
<p>На клиенте, к локальной сети которого требуется получить доступ, разрешим перенаправление трафика и включим маскарадинг в <a class="reference internal" href="security.html#firewalld-about"><span class="std std-ref">Firewalld</span></a>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo sysctl -w net.ipv4.conf.all.forwarding=1
sudo sysctl -w net.ipv6.conf.all.forwarding=1
sudo firewall-cmd --zone=public --add-masquerade
sudo firewall-cmd --zone public --add-forward
</pre></div>
</div>
<p>Отредактируем файл конфигурации данного клиента, дописав в <code class="docutils literal notranslate"><span class="pre">AllowedIPs</span></code> подсеть через запятую (однако если там уже указано <strong>0.0.0.0/0</strong>, то ничего более делать не требуется).</p>
<p>Проверим доступность компьютеров из локальной сети со стороны других клиентов WireGuard:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ping 192.168.1.2
</pre></div>
</div>
<p>Здесь вместо <strong>192.168.1.2</strong> укажем реально существующий адрес в локальной сети.</p>
<p>Если всё работает корректно, сделаем изменения на клиенте с LAN постоянными:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo bash -c &quot;echo -e \&quot;net.ipv4.conf.all.forwarding=1\nnet.ipv6.conf.all.forwarding=1\&quot; &gt; /etc/sysctl.d/99-wireguard.conf&quot;
sudo firewall-cmd --zone=public --add-masquerade --permanent
sudo firewall-cmd --permanent --zone public --add-forward
</pre></div>
</div>
<p>Перезагрузим настройки Firewalld:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sudo firewall-cmd --reload
</pre></div>
</div>
</section>
<section id="chroot-dns">
<span id="index-37"></span><span id="id18"></span><h2>В chroot окружении не работает DNS. Как исправить?<a class="headerlink" href="#chroot-dns" title="Ссылка на этот заголовок">¶</a></h2>
<p>Из-за использования <a class="reference internal" href="#resolved-default"><span class="std std-ref">systemd-resolved</span></a> в <a class="reference internal" href="administration.html#chroot"><span class="std std-ref">chroot-окружениях</span></a> Fedora не работает преобразование имён DNS, т.е. фактически отсутствует доступ к Интернету.</p>
<p>Для решения этой проблемы настроим классическую временную конфигурацию:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>mv /etc/resolv.conf /etc/resolv.conf.orig
echo &quot;nameserver 8.8.8.8&quot; &gt; /etc/resolv.conf
chown root:root /etc/resolv.conf
chmod 0644 /etc/resolv.conf
</pre></div>
</div>
<p>С этого момента DNS начнёт работать корректно.</p>
<p>По окончании работы обязательно восстановим предыдущие настройки:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>rm -f /etc/resolv.conf
mv /etc/resolv.conf.orig /etc/resolv.conf
</pre></div>
</div>
</section>
<section id="dns">
<span id="dns-server"></span><span id="index-38"></span><h2>Как установить и запустить собственный DNS-сервер?<a class="headerlink" href="#dns" title="Ссылка на этот заголовок">¶</a></h2>
<p>См. <a class="reference external" href="https://www.easycoding.org/2021/05/03/podnimaem-dns-server-dnsmasq.html">здесь</a>.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Быстрый поиск</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Искать" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script><h3>Навигация</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="generic-info.html">Основная информация</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Установка системы</a></li>
<li class="toctree-l1"><a class="reference internal" href="package-manager.html">Пакетный менеджер и установка пакетов</a></li>
<li class="toctree-l1"><a class="reference internal" href="administration.html">Системное администрирование</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Сетевое администрирование</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#vpn">Хочу обезопасить свой Интернет-трафик. Какую реализацию VPN выбрать?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ssh">При использовании SSH появляется ошибка доступа к ключам. Как исправить?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vpn-pptp">При установке VPN-соединения по протоколу PPTP появляется ошибка. Как исправить?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#firewalld-port-forwarding">Как пробросить локальный порт на удалённый хост?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#openvpn-fedora">Как поднять OpenVPN сервер в Fedora?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#wireguard-fedora">Как поднять WireGuard сервер в Fedora?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#matrix-fedora">Как поднять свой сервер Matrix в Fedora?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fedora">Как запустить простейший веб-сервер в Fedora?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#network-configuration">Как лучше настраивать сетевые подключения?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dlna">Как поднять DLNA сервер в локальной сети?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fedora-iperf">Как сделать замеры скорости локальной или беспроводной сети?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rsync-remote">Как передать содержимое каталога на удалённый сервер?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rsync-local">Как получить содержимое каталога с удалённого сервера?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dns-fedora">Как правильно указать DNS серверы в Fedora?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#etc-resolv-conf-fedora">Можно ли править файл /etc/resolv.conf в Fedora?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#firewalld-icmp">Как можно средствами Firewalld запретить ICMP?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#firewalld-openvpn-ip">Как средствами Firewalld разрешить подключение к OpenVPN серверу только с разрешённых IP адресов?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#firewalld-wireguard-ip">Как средствами Firewalld разрешить подключение к WireGuard серверу только с разрешённых IP адресов?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ip-nat">Как узнать внешний IP адрес за NAT провайдера?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#firewalld-ip-cloudflare">Как средствами Firewalld разрешить подключение к веб-серверу только с IP адресов CloudFlare?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ip-cloudflare">Как пробросить IP адреса клиентов за CloudFlare?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-mtr">Как проверить наличие или отсутствие потерь пакетов до узла?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ss-established">Как получить список установленных сетевых соединений?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ss-listening">Как получить список открытых портов?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#transient-hostname">Почему при подключении к сети имя хоста машины изменяется?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#transient-disable">Как запретить использование полученного от провайдера имени хоста?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#network-manager-systemd-resolved">Как переключить Network Manager на использование systemd-resolved?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#systemd-resolved">Как проверить статус работы systemd-resolved?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#resolved-default">Как сделать systemd-resolved основным резолвером?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#resolved-disable">Как отключить systemd-resolved и вернуться к прежней реализации?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dns-tls">Можно ли зашифровать DNS при помощи TLS?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#resolved-flush">Как очистить кэши systemd-resolved?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#firewalld">Где расположены файлы конфигурации доступных сервисов Firewalld?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#firewalld-override">Как переопределить предустановленный сервис в Firewalld?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ovpn">Как правильно импортировать подключение из OVPN файла?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#check-port">Как проверить открыт ли порт на удалённом сервере?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#wireguard-lan">Как открыть доступ к локальной сети через WireGuard?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chroot-dns">В chroot окружении не работает DNS. Как исправить?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dns">Как установить и запустить собственный DNS-сервер?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="virtualization.html">Виртуализация</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Безопасность</a></li>
<li class="toctree-l1"><a class="reference internal" href="using-system.html">Работа в системе</a></li>
<li class="toctree-l1"><a class="reference internal" href="using-applications.html">Сторонние приложения</a></li>
<li class="toctree-l1"><a class="reference internal" href="hardware.html">Оборудование</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Разработка и сборка пакетов</a></li>
<li class="toctree-l1"><a class="reference internal" href="tips-and-tricks.html">Оптимизация и тонкая настройка</a></li>
<li class="toctree-l1"><a class="reference internal" href="legal-info.html">Правовая информация</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="administration.html" title="предыдущая глава">Системное администрирование</a></li>
      <li>Next: <a href="virtualization.html" title="следующая глава">Виртуализация</a></li>
  </ul></li>
</ul>
</div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018 - 2022, EasyCoding Team and contributors.
      
    </div>

    
    <a href="https://github.com/RussianFedora/FAQ" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="_static/forkme_right_green.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>